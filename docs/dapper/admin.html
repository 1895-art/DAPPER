<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.1" />
<title>dapper.admin API documentation</title>
<meta name="description" content="High-level API. I.e. the main &#34;user-interface&#34; â€¦" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS_CHTML" integrity="sha256-kZafAc6mZvK3W3v1pHOcUix30OHQN6pU/NO2oFkqZVw=" crossorigin></script>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>dapper.admin</code></h1>
</header>
<section id="section-intro">
<p>High-level API. I.e. the main "user-interface".</p>
<p>Used for experiment (xp) specification/administration, including:</p>
<ul>
<li>da_method decorator</li>
<li>xpList</li>
<li>save_data</li>
<li>run_experiment</li>
<li>
<p>run_from_file</p>
</li>
<li>
<p>HiddenMarkovModel</p>
</li>
<li>Operator</li>
</ul>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-functions">Functions</h2>
<dl>
<dt id="dapper.admin.da_method"><code class="name flex">
<span>def <span class="ident">da_method</span></span>(<span>*default_dataclasses)</span>
</code></dt>
<dd>
<div class="desc"><p>Make the decorator that makes the DA classes.</p>
<p>Example:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; @da_method()
&gt;&gt;&gt; class Sleeper():
&gt;&gt;&gt;     &quot;Do nothing.&quot;
&gt;&gt;&gt;     seconds : int  = 10
&gt;&gt;&gt;     success : bool = True
&gt;&gt;&gt;     def assimilate(self,*args,**kwargs):
&gt;&gt;&gt;         for k in utils.progbar(range(self.seconds)):
&gt;&gt;&gt;             time.sleep(1)
&gt;&gt;&gt;         if not self.success:
&gt;&gt;&gt;             raise RuntimeError(&quot;Sleep over. Failing as intended.&quot;)
</code></pre>
<p>Example:</p>
<pre><code class="language-python-repl">&gt;&gt;&gt; @dcs.dataclass
&gt;&gt;&gt; class ens_defaults:
&gt;&gt;&gt;   infl : float = 1.0
&gt;&gt;&gt;   rot  : bool  = False
&gt;&gt;&gt;
&gt;&gt;&gt; @da_method(ens_defaults)
&gt;&gt;&gt; class EnKF:
&gt;&gt;&gt;     N     : int
&gt;&gt;&gt;     upd_a : str = &quot;Sqrt&quot;
&gt;&gt;&gt;
&gt;&gt;&gt;     def assimilate(self,HMM,xx,yy):
&gt;&gt;&gt;         ...
</code></pre></div>
</dd>
<dt id="dapper.admin.seed_and_simulate"><code class="name flex">
<span>def <span class="ident">seed_and_simulate</span></span>(<span>HMM, xp)</span>
</code></dt>
<dd>
<div class="desc"><p>Default experiment setup. Set seed and simulate truth and obs.</p>
<p>Note: if there is no <code>xp.seed</code> then then the seed is not set.
Thus, different experiments will produce different truth and obs.</p></div>
</dd>
<dt id="dapper.admin.run_experiment"><code class="name flex">
<span>def <span class="ident">run_experiment</span></span>(<span>xp, label, savedir, HMM, setup=None, free=True, statkeys=False, fail_gently=False, **stat_kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Used by xpList.launch() to run each single experiment.</p>
<p>This involves steps similar to <code>example_1.py</code>, i.e.:</p>
<ul>
<li>setup()
: Call function given by user. Should set
params, eg HMM.Force, seed, and return
(simulated/loaded) truth and obs series.</li>
<li>xp.assimilate()
: run DA, pass on exception if fail_gently</li>
<li>xp.stats.average_in_time() : result averaging</li>
<li>xp.avrgs.tabulate()
: result printing</li>
<li>dill.dump()
: result storage</li>
</ul></div>
</dd>
<dt id="dapper.admin.get_param_setter"><code class="name flex">
<span>def <span class="ident">get_param_setter</span></span>(<span>param_dict, **glob_dict)</span>
</code></dt>
<dd>
<div class="desc"><p>Mass creation of xp's by combining the value lists in the parameter dicts.</p>
<p>The parameters are trimmed to the ones available for the given method.
This is a good deal more efficient than relying on xpList's unique=True.</p>
<p>Beware! If, eg., [infl,rot] are in the param_dict, aimed at the EnKF,
but you forget that they are also attributes some method where you don't
actually want to use them (eg. SVGDF),
then you'll create many more than you intend.</p></div>
</dd>
</dl>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="dapper.admin.HiddenMarkovModel"><code class="flex name class">
<span>class <span class="ident">HiddenMarkovModel</span></span>
<span>(</span><span>Dyn, Obs, t, X0, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Container for attributes of a Hidden Markov Model (HMM).</p>
<p>This container contains the specification of a "twin experiment",
i.e. an "OSSE (observing system simulation experiment)".</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="dapper.dict_tools.NicePrint" href="dict_tools.html#dapper.dict_tools.NicePrint">NicePrint</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="dapper.admin.HiddenMarkovModel.printopts"><code class="name">var <span class="ident">printopts</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="dapper.admin.HiddenMarkovModel.Nx"><code class="name">var <span class="ident">Nx</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="dapper.admin.HiddenMarkovModel.Ny"><code class="name">var <span class="ident">Ny</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="dapper.admin.HiddenMarkovModel.simulate"><code class="name flex">
<span>def <span class="ident">simulate</span></span>(<span>self, desc='Truth & Obs')</span>
</code></dt>
<dd>
<div class="desc"><p>Generate synthetic truth and observations.</p></div>
</dd>
</dl>
</dd>
<dt id="dapper.admin.Operator"><code class="flex name class">
<span>class <span class="ident">Operator</span></span>
<span>(</span><span>M, model=None, noise=None, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Container for operators (models).</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="dapper.dict_tools.NicePrint" href="dict_tools.html#dapper.dict_tools.NicePrint">NicePrint</a></li>
</ul>
<h3>Class variables</h3>
<dl>
<dt id="dapper.admin.Operator.printopts"><code class="name">var <span class="ident">printopts</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
</dd>
<dt id="dapper.admin.xpList"><code class="flex name class">
<span>class <span class="ident">xpList</span></span>
<span>(</span><span>*args, unique=False)</span>
</code></dt>
<dd>
<div class="desc"><p>List, subclassed for holding experiment ("xp") objects.</p>
<p>Main use: administrate experiment <strong>launches</strong>.
Also see: <code>xpSpace</code> for experiment <strong>result presentation</strong>.</p>
<p>Modifications to <code>list</code>:</p>
<ul>
<li><code>__iadd__</code> (append) also for single items;
this is hackey, but convenience is king.</li>
<li><code>append()</code> supports <code>unique</code> to enable lazy xp declaration.</li>
<li><code>__getitem__</code> supports lists.</li>
<li>pretty printing (using common/distinct attrs).</li>
</ul>
<p>Add-ons:</p>
<ul>
<li><code>launch()</code></li>
<li><code>print_averages()</code></li>
<li><code>gen_names()</code></li>
<li><code>inds()</code> to search by kw-attrs.</li>
</ul>
<p>Initialize without args, or with a list of configs.</p>
<p>If <code>unique</code>: duplicates won't get appended.
This makes <code>append()</code> (and <code>__iadd__()</code>) relatively slow.
Use <code>extend()</code> or <code>__add__()</code> to bypass this validation.</p></div>
<h3>Ancestors</h3>
<ul class="hlist">
<li>builtins.list</li>
</ul>
<h3>Instance variables</h3>
<dl>
<dt id="dapper.admin.xpList.da_methods"><code class="name">var <span class="ident">da_methods</span></code></dt>
<dd>
<div class="desc"></div>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="dapper.admin.xpList.append"><code class="name flex">
<span>def <span class="ident">append</span></span>(<span>self, xp)</span>
</code></dt>
<dd>
<div class="desc"><p>Append if not unique &amp; present.</p></div>
</dd>
<dt id="dapper.admin.xpList.inds"><code class="name flex">
<span>def <span class="ident">inds</span></span>(<span>self, strict=True, missingval='NONSENSE', **kws)</span>
</code></dt>
<dd>
<div class="desc"><p>Find (all) indices of configs whose attributes match kws.</p>
<p>If strict, then xp's lacking a requested attr will not match,
unless the missingval (e.g. None) matches the required value.</p></div>
</dd>
<dt id="dapper.admin.xpList.split_attrs"><code class="name flex">
<span>def <span class="ident">split_attrs</span></span>(<span>self, nomerge=())</span>
</code></dt>
<dd>
<div class="desc"><p>Compile the attrs of all xps; split as distinct, redundant, common.</p>
<p>Insert None if an attribute is distinct but not in xp.</p></div>
</dd>
<dt id="dapper.admin.xpList.gen_names"><code class="name flex">
<span>def <span class="ident">gen_names</span></span>(<span>self, abbrev=6, tab=False)</span>
</code></dt>
<dd>
<div class="desc"><p>Similiar to <code>self.__repr__()</code>, but:</p>
<ul>
<li>returns <em>list</em> of names</li>
<li>tabulation is optional</li>
<li>attaches (abbreviated) labels to each attribute</li>
</ul></div>
</dd>
<dt id="dapper.admin.xpList.tabulate_avrgs"><code class="name flex">
<span>def <span class="ident">tabulate_avrgs</span></span>(<span>self, *args, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>Pretty (tabulated) repr of xps &amp; their avrgs.</p>
<p>Similar to stats.tabulate_avrgs(), but for the entire list of xps.</p></div>
</dd>
<dt id="dapper.admin.xpList.launch"><code class="name flex">
<span>def <span class="ident">launch</span></span>(<span>self, HMM, save_as='noname', mp=False, setup=&lt;function seed_and_simulate&gt;, fail_gently=None, **kwargs)</span>
</code></dt>
<dd>
<div class="desc"><p>For each xp in self: run_experiment(xp, &hellip;).</p>
<p>The results are saved in <code>rc.dirs['data']/save_as.stem</code>,
unless <code>save_as</code> is False/None.</p>
<p>Depending on <code>mp</code>, run_experiment() is delegated to one of:
- caller process (no parallelisation)
- multiprocessing on this host
- GCP (Google Cloud Computing) with HTCondor</p>
<p>If <code>setup == None</code>: use <code><a title="dapper.admin.seed_and_simulate" href="#dapper.admin.seed_and_simulate">seed_and_simulate()</a></code>.</p>
<p>The kwargs are forwarded to run_experiment().</p>
<p>See <code>example_2.py</code> and <code>example_3.py</code> for example use.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="dapper" href="index.html">dapper</a></code></li>
</ul>
</li>
<li><h3><a href="#header-functions">Functions</a></h3>
<ul class="">
<li><code><a title="dapper.admin.da_method" href="#dapper.admin.da_method">da_method</a></code></li>
<li><code><a title="dapper.admin.seed_and_simulate" href="#dapper.admin.seed_and_simulate">seed_and_simulate</a></code></li>
<li><code><a title="dapper.admin.run_experiment" href="#dapper.admin.run_experiment">run_experiment</a></code></li>
<li><code><a title="dapper.admin.get_param_setter" href="#dapper.admin.get_param_setter">get_param_setter</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="dapper.admin.HiddenMarkovModel" href="#dapper.admin.HiddenMarkovModel">HiddenMarkovModel</a></code></h4>
<ul class="">
<li><code><a title="dapper.admin.HiddenMarkovModel.simulate" href="#dapper.admin.HiddenMarkovModel.simulate">simulate</a></code></li>
<li><code><a title="dapper.admin.HiddenMarkovModel.Nx" href="#dapper.admin.HiddenMarkovModel.Nx">Nx</a></code></li>
<li><code><a title="dapper.admin.HiddenMarkovModel.Ny" href="#dapper.admin.HiddenMarkovModel.Ny">Ny</a></code></li>
<li><code><a title="dapper.admin.HiddenMarkovModel.printopts" href="#dapper.admin.HiddenMarkovModel.printopts">printopts</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="dapper.admin.Operator" href="#dapper.admin.Operator">Operator</a></code></h4>
<ul class="">
<li><code><a title="dapper.admin.Operator.printopts" href="#dapper.admin.Operator.printopts">printopts</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="dapper.admin.xpList" href="#dapper.admin.xpList">xpList</a></code></h4>
<ul class="two-column">
<li><code><a title="dapper.admin.xpList.append" href="#dapper.admin.xpList.append">append</a></code></li>
<li><code><a title="dapper.admin.xpList.inds" href="#dapper.admin.xpList.inds">inds</a></code></li>
<li><code><a title="dapper.admin.xpList.split_attrs" href="#dapper.admin.xpList.split_attrs">split_attrs</a></code></li>
<li><code><a title="dapper.admin.xpList.gen_names" href="#dapper.admin.xpList.gen_names">gen_names</a></code></li>
<li><code><a title="dapper.admin.xpList.tabulate_avrgs" href="#dapper.admin.xpList.tabulate_avrgs">tabulate_avrgs</a></code></li>
<li><code><a title="dapper.admin.xpList.launch" href="#dapper.admin.xpList.launch">launch</a></code></li>
<li><code><a title="dapper.admin.xpList.da_methods" href="#dapper.admin.xpList.da_methods">da_methods</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.1</a>.</p>
</footer>
</body>
</html>